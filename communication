import rospy
from geometry_msgs.msg import Point
from gazebo_msgs.msg import ModelState

class CylinderControlPlugin:
    def __init__(self):
        self.subscriber = rospy.Subscriber('/cyl_loc_topic', Point, self.callback)
        self.model_publisher = rospy.Publisher('/gazebo/set_model_state', ModelState, queue_size=1)

    def callback(self, data):
        model_state = ModelState()
        model_state.model_name = "cylinder"  # Name of the model in Gazebo
        model_state.pose.position.x = data.x
        model_state.pose.position.y = data.y
        model_state.pose.position.z = data.z

        self.model_publisher.publish(model_state)

def main():
    rospy.init_node('cylinder_control_plugin_node')
    plugin = CylinderControlPlugin()
    rospy.spin()

if __name__ == '__main__':
    try:
        main()
    except rospy.ROSInterruptException:
        pass
